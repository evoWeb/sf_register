class e{verdictLength(e){const t=e.length;let s,o;switch(!0){case t>0&&t<5:o=`3 points for length (${t})`,s=3;break;case t>4&&t<8:o=`6 points for length (${t})`,s=6;break;case t>7&&t<16:o=`12 points for length (${t})`,s=12;break;default:o=`18 points for length (${t})`,s=18}return{score:s,log:o}}verdictLetter(e){const t=e.match(/[a-z]/),s=e.match(/[A-Z]/);let o=0,n="";return t?s?(o=7,n="7 points for letters are mixed"):(o=5,n="5 point for at least one lower case char"):s&&(o=5,n="5 points for at least one upper case char"),{score:o,log:n}}verdictNumbers(e){const t=e.replace(/\D/gi,"");let s=0,o="";return t.length>1?(s=7,o="7 points for at least three numbers"):t.length>0&&(s=5,o="5 points for at least one number"),{score:s,log:o}}verdictSpecialChars(e){const t=e.replace(/[\w\s]/gi,"");let s=0,o="";return t.length>1?(s=10,o="10 points for at least two special chars"):t.length>0&&(s=5,o="5 points for at least one special char"),{score:s,log:o}}verdictCombos(e,t,s){let o=0,n="";return 7===e&&t>0&&s>0?(o=6,n="6 combo points for letters, numbers and special characters"):e>0&&t>0&&s>0?(o=4,n="4 combo points for letters, numbers and special characters"):7===e&&t>0?(o=2,n="2 combo points for mixed case letters and numbers"):e>0&&t>0?(o=1,n="1 combo points for letters and numbers"):7===e&&(o=1,n="1 combo points for mixed case letters"),{score:o,log:n}}finalVerdict(e){let t;return t=e<16?"very weak":e>15&&e<25?"weak":e>24&&e<35?"mediocre":e>34&&e<45?"strong":"stronger",t}calculate(e){const t=this.verdictLength(e),s=this.verdictLetter(e),o=this.verdictNumbers(e),n=this.verdictSpecialChars(e),a=this.verdictCombos(s.score,o.score,n.score),i=t.score+s.score+o.score+n.score+a.score;return{score:i,log:[t.log,s.log,o.log,n.log,a.log,i+" points final score"].join("\n"),verdict:this.finalVerdict(i)}}}const t=window.document;new class{constructor(){this.loading=!1,this.ajaxEndpoint="/index.php?ajax=sf_register",this.ajaxRequest=null,this.passwordStrengthCalculator=null,this.form=null,this.barGraph=null,this.zone=null,this.zoneEmpty=null,this.zoneLoading=null,this.fileInformation=null,this.removeImage=null,"loading"===t.readyState?t.addEventListener("DOMContentLoaded",(()=>this.initialize())):this.initialize()}initialize(){this.initializeElements(),this.initializePasswordStrengthCalculator(),this.initializeEvents()}initializeElements(){this.form=t.getElementById("sfrForm"),this.zone=t.getElementById("sfrZone"),this.zoneEmpty=t.getElementById("sfrZone_empty"),this.zoneLoading=t.getElementById("sfrZone_loading"),this.barGraph=t.getElementById("bargraph"),this.fileInformation=t.getElementById("uploadFile"),this.removeImage=t.getElementById("removeImage")}initializePasswordStrengthCalculator(){null!==this.barGraph&&(this.barGraph.classList.add("show"),this.passwordStrengthCalculator=new e)}initializeEvents(){this.attachToElementById("sfrCountry","change",(e=>this.countryChanged(e))),this.attachToElementById("sfrCountry","keyup",(e=>this.countryChanged(e))),this.attachToElementById("uploadButton","change",(e=>this.uploadFile(e))),this.attachToElementById("removeImageButton","click",(()=>this.removeFile())),this.attachToElementById("sfrPassword","keyup",(e=>this.checkPasswordOnChange(e)))}showElement(e){e.classList.remove("d-none"),e.classList.add("d-block")}hideElement(e){e.classList.remove("d-block"),e.classList.add("d-none")}attachToElementById(e,s,o){const n=t.getElementById(e);null!==n&&this.attachToElement(n,s,o)}attachToElement(e,t,s){e&&e.addEventListener(t,s)}checkPasswordOnChange(e){const t=e.target,s=this.passwordStrengthCalculator.calculate(t.value);this.barGraph.value=s.score}loadCountryZonesByCountry(e){null!==this.zone&&(this.loading=!0,this.zone.disabled=!0,this.hideElement(this.zoneEmpty),this.showElement(this.zoneLoading),this.ajaxRequest=new XMLHttpRequest,this.ajaxRequest.onload=e=>this.xhrReadyOnLoad(e),this.ajaxRequest.open("POST",this.ajaxEndpoint),this.ajaxRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),this.ajaxRequest.send("tx_sfregister[action]=zones&tx_sfregister[parent]="+e))}countryChanged(e){if(!0!==this.loading&&(e instanceof KeyboardEvent&&("ArrowDown"===e.key||"ArrowUp"===e.key)||"change"===e.type)&&this.zone){const t=e.target,s=t.options[t.selectedIndex].value;this.loadCountryZonesByCountry(s)}}xhrReadyOnLoad(e){const t=e.target;if(4===t.readyState&&200===t.status){const e=JSON.parse(t.responseText);this.hideElement(this.zoneLoading),"error"===e.status||0===e.data.length?this.showElement(this.zoneEmpty):this.addZoneOptions(e.data)}this.loading=!1}addZoneOptions(e){for(;this.zone.length;)this.zone.removeChild(this.zone[0]);e.forEach(((e,t)=>{this.zone.options[t]=new Option(e.label,e.value)})),this.zone.disabled=!1}uploadFile(e){const t=e.target;null!==this.fileInformation&&(this.fileInformation.value=t.value)}removeFile(){null!==this.removeImage&&(this.removeImage.value="1",this.form.submit())}};//# sourceMappingURL=sf_register.min.js.map
