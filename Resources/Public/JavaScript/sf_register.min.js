(()=>{"use strict";class e{verdictLength(e){const t=e.length;let s,o;switch(!0){case t>0&&t<5:o="3 points for length ("+t+")",s=3;break;case t>4&&t<8:o="6 points for length ("+t+")",s=6;break;case t>7&&t<16:o="12 points for length ("+t+")",s=12;break;default:o="18 points for length ("+t+")",s=18}return{score:s,log:o}}verdictLetter(e){const t=e.match(/[a-z]/),s=e.match(/[A-Z]/);let o=0,n="";return t?s?(o=7,n="7 points for letters are mixed"):(o=5,n="5 point for at least one lower case char"):s&&(o=5,n="5 points for at least one upper case char"),{score:o,log:n}}verdictNumbers(e){const t=e.replace(/\D/gi,"");let s=0,o="";return t.length>1?(s=7,o="7 points for at least three numbers"):t.length>0&&(s=5,o="5 points for at least one number"),{score:s,log:o}}verdictSpecialChars(e){const t=e.replace(/[\w\s]/gi,"");let s=0,o="";return t.length>1?(s=10,o="10 points for at least two special chars"):t.length>0&&(s=5,o="5 points for at least one special char"),{score:s,log:o}}verdictCombos(e,t,s){let o=0,n="";return 7===e&&t>0&&s>0?(o=6,n="6 combo points for letters, numbers and special characters"):e>0&&t>0&&s>0?(o=4,n="4 combo points for letters, numbers and special characters"):7===e&&t>0?(o=2,n="2 combo points for mixed case letters and numbers"):e>0&&t>0?(o=1,n="1 combo points for letters and numbers"):7===e&&(o=1,n="1 combo points for mixed case letters"),{score:o,log:n}}finalVerdict(e){let t;return t=e<16?"very weak":e>15&&e<25?"weak":e>24&&e<35?"mediocre":e>34&&e<45?"strong":"stronger",t}calculate(e){const t=this.verdictLength(e),s=this.verdictLetter(e),o=this.verdictNumbers(e),n=this.verdictSpecialChars(e),a=this.verdictCombos(s.score,o.score,n.score),r=t.score+s.score+o.score+n.score+a.score,i=[t.log,s.log,o.log,n.log,a.log,r+" points final score"].join("\n");return{score:r,verdict:this.finalVerdict(r),log:i}}}const t=window.document;new class{constructor(){this.loading=!1,this.ajaxRequest=null,this.barGraph=null,this.passwordStrengthCalculator=null,this.zone=null,this.zoneEmpty=null,this.zoneLoading=null,t.addEventListener("DOMContentLoaded",this.contentLoaded.bind(this))}contentLoaded(){this.zone=t.getElementById("sfrZone"),this.zoneEmpty=t.getElementById("sfrZone_empty"),this.zoneLoading=t.getElementById("sfrZone_loading"),this.barGraph=t.getElementById("bargraph"),this.barGraph&&(this.barGraph.classList.add("show"),this.passwordStrengthCalculator=new e,this.attachToElementById("sfrpassword","keyup",this.callTestPassword.bind(this))),this.attachToElementById("sfrCountry","change",this.countryChanged.bind(this)),this.attachToElementById("sfrCountry","keyup",this.countryChanged.bind(this)),this.attachToElementById("uploadButton","change",this.uploadFile.bind(this)),this.attachToElementById("removeImageButton","click",this.removeFile.bind(this))}showElement(e){e.classList.remove("d-none"),e.classList.add("d-block")}hideElement(e){e.classList.remove("d-block"),e.classList.add("d-none")}attachToElementById(e,s,o){const n=t.getElementById(e);this.attachToElement(n,s,o)}attachToElement(e,t,s){e&&e.addEventListener(t,s)}callTestPassword(e){const t=e.target,s=this.passwordStrengthCalculator.calculate(t.value);if("meter"===this.barGraph.tagName.toLowerCase())this.barGraph.value=s.score;else{const e=this.barGraph,t=Math.min(Math.floor(s.score/3.4),10),o=(e.contentDocument||e.contentWindow.document).getElementsByClassName("blind");for(let e=0;e<o.length;e++){const s=o[e];e<t?this.hideElement(s):this.showElement(s)}}}loadCountryZonesByCountry(e){this.loading=!0,this.zone.disabled=!0,this.hideElement(this.zoneEmpty),this.showElement(this.zoneLoading),this.ajaxRequest=new XMLHttpRequest,this.ajaxRequest.onload=this.xhrReadyOnLoad.bind(this),this.ajaxRequest.open("POST","/index.php?ajax=sf_register"),this.ajaxRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),this.ajaxRequest.send("tx_sfregister[action]=zones&tx_sfregister[parent]="+e)}countryChanged(e){if(("change"===e.type||"keyup"===e.type&&(40===e.keyCode||38===e.keyCode))&&!0!==this.loading&&this.zone){const t=e.target||e.srcElement,s=t.options[t.selectedIndex].value;this.loadCountryZonesByCountry(s)}}xhrReadyOnLoad(e){const t=e.target;if(4===t.readyState&&200===t.status){const e=JSON.parse(t.responseText);this.hideElement(this.zoneLoading),"error"===e.status||0===e.data.length?this.showElement(this.zoneEmpty):this.addZoneOptions(e.data)}this.loading=!1}addZoneOptions(e){for(;this.zone.length;)this.zone.removeChild(this.zone[0]);e.forEach(((e,t)=>{this.zone.options[t]=new Option(e.label,e.value)})),this.zone.disabled=!1}uploadFile(){const e=t.getElementById("uploadFile");e&&(e.value=this.value)}removeFile(){const e=t.getElementById("removeImage");e&&(e.value="1"),this.submitForm()}submitForm(){const e=t.getElementById("sfrForm");e&&e.submit()}}})();
//# sourceMappingURL=sf_register.min.js.map